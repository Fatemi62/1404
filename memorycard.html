<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø§Ø²ÛŒ ØªØ³Øª Ø­Ø§ÙØ¸Ù‡ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            margin: 0;
            padding: 20px;
        }
        
        h1 {
            color: #2c3e50;
        }
        
        .game-info {
            margin: 20px 0;
            font-size: 18px;
        }
        
        .game-board {
            display: grid;
            gap: 10px;
            margin: 0 auto;
            justify-content: center;
        }
        
        .card {
            height: 80px;
            width: 80px;
            background-color: #3498db;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: white;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
        }
        
        .card:hover {
            transform: scale(1.05);
        }
        
        .card.flipped {
            background-color: #2ecc71;
            transform: rotateY(180deg);
        }
        
        .card.matched {
            background-color: #e74c3c;
            cursor: default;
        }
        
        button {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        button:hover {
            background-color: #1a252f;
        }
        
        .trophy {
            font-size: 100px;
            margin: 30px 0;
            display: none;
        }
        
        .level-info {
            font-size: 20px;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            width: 100%;
            max-width: 500px;
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            margin: 20px auto;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #2ecc71;
            width: 0%;
            transition: width 0.5s;
        }
    </style>
</head>
<body>
    <h1>Ø¨Ø§Ø²ÛŒ ØªØ³Øª Ø­Ø§ÙØ¸Ù‡ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</h1>
    <div class="level-info" id="levelInfo">Ù…Ø±Ø­Ù„Ù‡ 1 Ø§Ø² 3</div>
    <div class="progress-bar">
        <div class="progress" id="progressBar"></div>
    </div>
    <div class="game-info">
        <span id="moves">Ø­Ø±Ú©Ø§Øª: 0</span> | 
        <span id="timer">Ø²Ù…Ø§Ù†: 0 Ø«Ø§Ù†ÛŒÙ‡</span> | 
        <span id="score">Ø§Ù…ØªÛŒØ§Ø²: 0</span>
    </div>
    <div class="game-board" id="gameBoard"></div>
    <button id="restartButton" style="display: none;">Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
    <div class="trophy" id="trophy">ğŸ†</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameBoard = document.getElementById('gameBoard');
            const movesDisplay = document.getElementById('moves');
            const timerDisplay = document.getElementById('timer');
            const scoreDisplay = document.getElementById('score');
            const restartButton = document.getElementById('restartButton');
            const trophy = document.getElementById('trophy');
            const levelInfo = document.getElementById('levelInfo');
            const progressBar = document.getElementById('progressBar');
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø±Ø§Ø­Ù„
            const levels = [
                { rows: 4, cols: 4 },  // Ù…Ø±Ø­Ù„Ù‡ 1: 4x4 (16 Ú©Ø§Ø±Øª)
                { rows: 4, cols: 6 },  // Ù…Ø±Ø­Ù„Ù‡ 2: 4x6 (24 Ú©Ø§Ø±Øª)
                { rows: 6, cols: 6 }   // Ù…Ø±Ø­Ù„Ù‡ 3: 6x6 (36 Ú©Ø§Ø±Øª)
            ];
            
            const emojiSets = [
                ['ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ¹', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼'],
                ['ğŸ', 'ğŸŒ', 'ğŸ’', 'ğŸ“', 'ğŸŠ', 'ğŸ‹', 'ğŸ‰', 'ğŸ‡', 'ğŸ', 'ğŸ¥', 'ğŸ‘', 'ğŸˆ'],
                ['âš½', 'ğŸ€', 'ğŸˆ', 'âš¾', 'ğŸ¾', 'ğŸ', 'ğŸ‰', 'ğŸ±', 'ğŸ“', 'ğŸ¸', 'ğŸ’', 'ğŸ‘', 'ğŸ¥', 'ğŸ', 'ğŸª€', 'ğŸ¥Š', 'ğŸ›¹', 'ğŸ›¼']
            ];
            
            let currentLevel = 0;
            let cards = [];
            let flippedCards = [];
            let matchedCards = [];
            let moves = 0;
            let timer = 0;
            let score = 0;
            let timerInterval;
            let gameStarted = false;
            
            // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
            function startGame() {
                // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ
                const level = levels[currentLevel];
                const emojis = emojiSets[currentLevel];
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ
                cards = [];
                const pairsNeeded = (level.rows * level.cols) / 2;
                for (let i = 0; i < pairsNeeded; i++) {
                    cards.push(emojis[i % emojis.length]);
                    cards.push(emojis[i % emojis.length]);
                }
                
                // Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                shuffleCards();
                
                // ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ø¯Ø§Ø²Ù‡ ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ
                gameBoard.style.gridTemplateColumns = `repeat(${level.cols}, 80px)`;
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¯Ø± ØµÙØ­Ù‡
                createCards();
                
                // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
                flippedCards = [];
                matchedCards = [];
                moves = 0;
                timer = 0;
                gameStarted = false;
                movesDisplay.textContent = `Ø­Ø±Ú©Ø§Øª: ${moves}`;
                timerDisplay.textContent = `Ø²Ù…Ø§Ù†: ${timer} Ø«Ø§Ù†ÛŒÙ‡`;
                levelInfo.textContent = `Ù…Ø±Ø­Ù„Ù‡ ${currentLevel + 1} Ø§Ø² 3`;
                progressBar.style.width = `${(currentLevel / 3) * 100}%`;
                
                // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªØ§ÛŒÙ…Ø± Ù‚Ø¨Ù„ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´Øª
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ú©Ø§Ù¾ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
                trophy.style.display = 'none';
                restartButton.style.display = 'none';
            }
            
            // ØªØ§Ø¨Ø¹ Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            function shuffleCards() {
                for (let i = cards.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [cards[i], cards[j]] = [cards[j], cards[i]];
                }
            }
            
            // ØªØ§Ø¨Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¯Ø± ØµÙØ­Ù‡
            function createCards() {
                gameBoard.innerHTML = '';
                
                cards.forEach((emoji, index) => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.dataset.index = index;
                    card.dataset.emoji = emoji;
                    card.textContent = '?';
                    card.addEventListener('click', flipCard);
                    gameBoard.appendChild(card);
                });
            }
            
            // ØªØ§Ø¨Ø¹ Ú†Ø±Ø®Ø§Ù†Ø¯Ù† Ú©Ø§Ø±Øª
            function flipCard() {
                // Ø§Ú¯Ø± Ø¨Ø§Ø²ÛŒ Ø´Ø±ÙˆØ¹ Ù†Ø´Ø¯Ù‡ØŒ ØªØ§ÛŒÙ…Ø± Ø±Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†
                if (!gameStarted) {
                    startTimer();
                    gameStarted = true;
                }
                
                const selectedCard = this;
                
                // Ø§Ú¯Ø± Ú©Ø§Ø±Øª Ù‚Ø¨Ù„Ø§ Ú†Ø±Ø®Ø§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡ ÛŒØ§ Ø¬ÙØª Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ú©Ø§Ø±ÛŒ Ù†Ú©Ù†
                if (selectedCard.classList.contains('flipped') || 
                    selectedCard.classList.contains('matched') || 
                    flippedCards.length >= 2) {
                    return;
                }
                
                // Ú†Ø±Ø®Ø§Ù†Ø¯Ù† Ú©Ø§Ø±Øª
                selectedCard.classList.add('flipped');
                selectedCard.textContent = selectedCard.dataset.emoji;
                flippedCards.push(selectedCard);
                
                // Ø§Ú¯Ø± Ø¯Ùˆ Ú©Ø§Ø±Øª Ú†Ø±Ø®Ø§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù†Ø¯ØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†
                if (flippedCards.length === 2) {
                    moves++;
                    movesDisplay.textContent = `Ø­Ø±Ú©Ø§Øª: ${moves}`;
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ ØªØ·Ø§Ø¨Ù‚
                    if (flippedCards[0].dataset.emoji === flippedCards[1].dataset.emoji) {
                        // Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¬ÙØª Ù‡Ø³ØªÙ†Ø¯
                        flippedCards.forEach(card => {
                            card.classList.add('matched');
                            matchedCards.push(card);
                        });
                        
                        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ù…ØªÛŒØ§Ø²
                        score += 10 * (currentLevel + 1);
                        scoreDisplay.textContent = `Ø§Ù…ØªÛŒØ§Ø²: ${score}`;
                        
                        flippedCards = [];
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§ÛŒØ§Ù† Ù…Ø±Ø­Ù„Ù‡
                        if (matchedCards.length === cards.length) {
                            endLevel();
                        }
                    } else {
                        // Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¬ÙØª Ù†ÛŒØ³ØªÙ†Ø¯ØŒ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø¢Ù†Ù‡Ø§ Ø¨Ø¹Ø¯ Ø§Ø² ØªØ§Ø®ÛŒØ±
                        setTimeout(() => {
                            flippedCards.forEach(card => {
                                card.classList.remove('flipped');
                                card.textContent = '?';
                            });
                            flippedCards = [];
                        }, 1000);
                    }
                }
            }
            
            // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø±
            function startTimer() {
                timerInterval = setInterval(() => {
                    timer++;
                    timerDisplay.textContent = `Ø²Ù…Ø§Ù†: ${timer} Ø«Ø§Ù†ÛŒÙ‡`;
                }, 1000);
            }
            
            // ØªØ§Ø¨Ø¹ Ù¾Ø§ÛŒØ§Ù† Ù…Ø±Ø­Ù„Ù‡
            function endLevel() {
                clearInterval(timerInterval);
                
                // Ø§ÙØ²Ø§ÛŒØ´ Ù…Ø±Ø­Ù„Ù‡
                currentLevel++;
                progressBar.style.width = `${(currentLevel / 3) * 100}%`;
                
                if (currentLevel < levels.length) {
                    // Ø§Ú¯Ø± Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡ØŒ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø±Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†
                    setTimeout(() => {
                        startGame();
                    }, 1500);
                } else {
                    // Ø§Ú¯Ø± Ù‡Ù…Ù‡ Ù…Ø±Ø§Ø­Ù„ ØªÙ…Ø§Ù… Ø´Ø¯Ù‡ØŒ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
                    endGame();
                }
            }
            
            // ØªØ§Ø¨Ø¹ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
            function endGame() {
                setTimeout(() => {
                    // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ù¾ Ù‚Ù‡Ø±Ù…Ø§Ù†ÛŒ
                    trophy.style.display = 'block';
                    restartButton.style.display = 'inline-block';
                    
                    // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ
                    const timeBonus = Math.max(0, 500 - (timer * 2));
                    score += timeBonus;
                    scoreDisplay.textContent = `Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ: ${score}`;
                    
                    alert(`ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ù…Ø±Ø§Ø­Ù„ Ø±Ø§ Ø¯Ø± ${moves} Ø­Ø±Ú©Øª Ùˆ ${timer} Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø§Ù†Ø¯ÛŒØ¯!\nØ§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ Ø´Ù…Ø§: ${score}`);
                }, 1000);
            }
            
            // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
            restartButton.addEventListener('click', () => {
                currentLevel = 0;
                score = 0;
                scoreDisplay.textContent = `Ø§Ù…ØªÛŒØ§Ø²: ${score}`;
                startGame();
            });
            
            // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø±
            startGame();
        });
    </script>
</body>
</html>